c:\Users\albs_\source\repos\msx-tests\v9990.s1FNAME "v9990.rom" 3PageSize: equ 0x4000 56 org 0x4000, 0xbeff 8 Include/RomHeader.s12 db "AB" 3 dw Execute 4 dw 0 6 dw 0 8 dw 0 9 dw 0, 0, 0 10 11c:\Users\albs_\source\repos\msx-tests\v9990.s1113V9:151830.PORT_0: equ 0x6031.PORT_1: equ 0x6132.PORT_2: equ 0x6233.PORT_3: equ 0x6334.PORT_4: equ 0x6435.PORT_5: equ 0x6536.PORT_6: equ 0x6637.PORT_7: equ 0x6738424950.P1_PATTBL_LAYER_A: equ 0x00000 51.P1_PATTBL_LAYER_B: equ 0X40000 52.P1_SPRATR: equ 0X3fe00 53.P1_NAMTBL_LAYER_A: equ 0X7c000 54.P1_NAMTBL_LAYER_B: equ 0X7e000 56586061.SetRegister:62 out (V9.PORT_4), a 63 ld a, b64 out (V9.PORT_3), a 65 ret6869.LDIRVM:70 push bc71 push af72 73 ld a, 0000 0000 B74 out (V9.PORT_4), a76 ld c, V9.PORT_378 79 out (c), e81 82 out (c), d83 pop af85 86 and 0111 1111 b 87 out (c), a88 pop de91 93 ld b, 3294 95 ld c, V9.PORT_096.LDIRVM_loop:97 98 outi99 100 djnz .LDIRVM_loop102 107 ret112Execute:114 116 117 ld a, 0118 out (V9.PORT_7), a120 124 ld a, 6 125 ld b, 0000 0101 b 126 call V9.SetRegister128 136 ld a, 7 137 ld b, 0000 0000 b 138 call V9.SetRegister141 143 ld a, 8 144 ld b, 1000 0010 b 145 call V9.SetRegister148 149 ld a, 27 150 ld b, 0000 0000 b 151 call V9.SetRegister155 156 ld a, 17 157 ld b, 0000 0000 b 158 call V9.SetRegister160 ld a, 18 161 ld b, 0000 0000 b 162 call V9.SetRegister164 ld a, 19 165 ld b, 0000 0000 b 166 call V9.SetRegister168 ld a, 20 169 ld b, 0000 0000 b 170 call V9.SetRegister172 ld a, 21 173 ld b, 0000 0000 b 174 call V9.SetRegister176 ld a, 22 177 ld b, 0000 0000 b 178 call V9.SetRegister180 ld a, 23 181 ld b, 0000 0000 b 182 call V9.SetRegister184 ld a, 24 185 ld b, 0000 0000 b 186 call V9.SetRegister190 191 ld hl, Tile_0 192 ld a, V9.P1_PATTBL_LAYER_A >> 16 193 ld de, V9.P1_PATTBL_LAYER_A AND 0xffff 194 ld bc, Tile_0.size 195 call V9.LDIRVM 198 199 ld hl, NamesTable_test 200 ld a, V9.P1_NAMTBL_LAYER_A >> 16 201 ld de, V9.P1_NAMTBL_LAYER_A AND 0xffff 202 ld bc, NamesTable_test.size 203 call V9.LDIRVM 206 207 208 212 216 ld a, 13 217 ld b, 0000 00 00 b 218 call V9.SetRegister221 223 224 ld a, 0000 1110 b225 out (V9.PORT_4), a227 228 ld a, 0000 0000 b229 out (V9.PORT_3), a231 234 ld hl, Palette_test235 ld c, V9.PORT_1236 ld b, 16 * 3 237.SetPalette_loop:238 outi 239 outi 240 outi 241 djnz .SetPalette_loop243 jp $ 246248252256259261271273275276Tile_0:277 db 0xff, 0xff, 0xff, 0xff278 db 0xf0, 0x00, 0x00, 0x0f279 db 0xf6, 0x12, 0x34, 0x5f280 db 0xf7, 0x89, 0xab, 0xcf281 db 0xfd, 0xef, 0xff, 0xff282 db 0xff, 0xff, 0xff, 0xff283 db 0xff, 0xff, 0xff, 0xff284 db 0xff, 0xff, 0xff, 0xff285.size: equ $ - Tile_0287NamesTable_test:288 dw 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1289 312.size: equ $ - NamesTable_test314Palette_test:315 316 db 15, 0, 0317 db 15, 31, 31318 db 15, 0, 31319 db 15, 15, 15321 db 0, 0, 0322 db 31, 0, 0323 db 0, 31, 0324 db 0, 0, 31326 db 31, 15, 15327 db 15, 31, 15328 db 15, 15, 31329 db 15, 0, 0331 db 0, 15, 0332 db 0, 0, 15333 db 0, 7, 0334 db 0, 0, 7338339 ds PageSize - ($ - 0x4000), 255 340