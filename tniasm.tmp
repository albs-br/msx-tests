v9990.s1FNAME "v9990.rom" 34 org 0x4000, 0xbeff 6 Include/RomHeader.s12 db "AB" 3 dw Execute 4 dw 0 6 dw 0 8 dw 0 9 dw 0, 0, 0 10 11v9990.s911V9:131628.PORT_0: equ 0x6029.PORT_1: equ 0x6130.PORT_2: equ 0x6231.PORT_3: equ 0x6332.PORT_4: equ 0x6433.PORT_5: equ 0x6534.PORT_6: equ 0x6635.PORT_7: equ 0x6736404748.P1_PATTBL_LAYER_A: equ 0x00000 49.P1_PATTBL_LAYER_B: equ 0X40000 50.P1_SPRATR: equ 0X3fe00 51.P1_NAMTBL_LAYER_A: equ 0X7c000 52.P1_NAMTBL_LAYER_B: equ 0X7e000 54565859.SetRegister:60 out (V9.PORT_4), a 61 ld a, b62 out (V9.PORT_3), a 63 ret6667.LDIRVM:68 push bc69 push af70 71 ld a, 0000 0000 B72 out (V9.PORT_4), a74 ld c, V9.PORT_376 77 out (c), e79 80 out (c), d81 pop af83 84 and 0111 1111 b 85 out (c), a86 pop de89 91 ld b, 3292 93 ld c, V9.PORT_094.LDIRVM_loop:95 96 outi97 98 djnz .LDIRVM_loop100 105 ret110Execute:112 114 115 ld a, 0116 out (V9.PORT_7), a118 122 ld a, 6 123 ld b, 0000 0101 b 124 call V9.SetRegister126 134 ld a, 7 135 ld b, 0000 0000 b 136 call V9.SetRegister139 141 ld a, 8 142 ld b, 1000 0010 b 143 call V9.SetRegister146 147 ld a, 27 148 ld b, 0000 0000 b 149 call V9.SetRegister153 154 ld a, 17 155 ld b, 0000 0000 b 156 call V9.SetRegister158 ld a, 18 159 ld b, 0000 0000 b 160 call V9.SetRegister162 ld a, 19 163 ld b, 0000 0000 b 164 call V9.SetRegister166 ld a, 20 167 ld b, 0000 0000 b 168 call V9.SetRegister170 ld a, 21 171 ld b, 0000 0000 b 172 call V9.SetRegister174 ld a, 22 175 ld b, 0000 0000 b 176 call V9.SetRegister178 ld a, 23 179 ld b, 0000 0000 b 180 call V9.SetRegister182 ld a, 24 183 ld b, 0000 0000 b 184 call V9.SetRegister188 189 ld hl, Tile_0 190 ld a, V9.P1_PATTBL_LAYER_A >> 16 191 ld de, V9.P1_PATTBL_LAYER_A AND 0xffff 192 ld bc, Tile_0.size 193 call V9.LDIRVM 196 197 ld hl, NamesTable_test 198 ld a, V9.P1_NAMTBL_LAYER_A >> 16 199 ld de, V9.P1_NAMTBL_LAYER_A AND 0xffff 200 ld bc, NamesTable_test.size 201 call V9.LDIRVM 204 205 206 210 214 ld a, 13 215 ld b, 0000 00 00 b 216 call V9.SetRegister219 221 222 ld a, 0000 1110 b223 out (V9.PORT_4), a225 226 ld a, 0000 0000 b227 out (V9.PORT_3), a229 232 ld hl, Palette_test233 ld c, V9.PORT_1234 ld b, 16 * 3 235.SetPalette_loop:236 outi 237 outi 238 outi 239 djnz .SetPalette_loop241 jp $ 244246250254257259269271273274Tile_0:275 db 0xff, 0xff, 0xff, 0xff276 db 0xf0, 0x00, 0x00, 0x0f277 db 0xf6, 0x12, 0x34, 0x5f278 db 0xf7, 0x89, 0xab, 0xcf279 db 0xfd, 0xef, 0xff, 0xff280 db 0xff, 0xff, 0xff, 0xff281 db 0xff, 0xff, 0xff, 0xff282 db 0xff, 0xff, 0xff, 0xff283.size: equ $ - Tile_0285NamesTable_test:286 dw 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1287 310.size: equ $ - NamesTable_test312Palette_test:313 314 db 15, 0, 0315 db 15, 31, 31316 db 15, 0, 31317 db 15, 15, 15319 db 0, 0, 0320 db 31, 0, 0321 db 0, 31, 0322 db 0, 0, 31324 db 31, 15, 15325 db 15, 31, 15326 db 15, 15, 31327 db 15, 0, 0329 db 0, 15, 0330 db 0, 0, 15331 db 0, 7, 0332 db 0, 0, 7333