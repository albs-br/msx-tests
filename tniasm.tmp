c:\Users\albs_\source\repos\msx-tests\v9990.s1FNAME "v9990.rom" 3PageSize: equ 0x4000 56 org 0x4000, 0xbeff 8 Include/RomHeader.s12 db "AB" 3 dw Execute 4 dw 0 6 dw 0 8 dw 0 9 dw 0, 0, 0 10 11c:\Users\albs_\source\repos\msx-tests\v9990.s1113V9:151830.PORT_0: equ 0x6031.PORT_1: equ 0x6132.PORT_2: equ 0x6233.PORT_3: equ 0x6334.PORT_4: equ 0x6435.PORT_5: equ 0x6536.PORT_6: equ 0x6637.PORT_7: equ 0x6738424950.P1_PATTBL_LAYER_A: equ 0x00000 51.P1_PATTBL_LAYER_B: equ 0X40000 52.P1_SPRATR: equ 0X3fe00 53.P1_NAMTBL_LAYER_A: equ 0X7c000 54.P1_NAMTBL_LAYER_B: equ 0X7e000 56586061.SetRegister:62 out (V9.PORT_4), a 63 ld a, b64 out (V9.PORT_3), a 65 ret6869.LDIRVM:70 push bc71 push af72 73 ld a, 0000 0000 B74 out (V9.PORT_4), a76 ld c, V9.PORT_378 79 out (c), e81 82 out (c), d83 pop af85 86 and 0111 1111 b 87 out (c), a88 pop de90 91 ld c, V9.PORT_092.LDIRVM_loop:93 94 outi95 96 dec de97 ld a, e98 or d99 jp nz, .LDIRVM_loop101 ret105Execute:107 109 110 ld a, 0111 out (V9.PORT_7), a113 117 ld a, 6 118 ld b, 0000 0101 b 119 call V9.SetRegister121 129 ld a, 7 130 ld b, 0000 0000 b 131 call V9.SetRegister134 136 ld a, 8 137 ld b, 1000 0010 b 138 call V9.SetRegister141 142 ld a, 27 143 ld b, 0000 0000 b 144 call V9.SetRegister148 149 ld a, 17 150 ld b, 0000 0000 b 151 call V9.SetRegister153 ld a, 18 154 ld b, 0000 0000 b 155 call V9.SetRegister157 ld a, 19 158 ld b, 0000 0000 b 159 call V9.SetRegister161 ld a, 20 162 ld b, 0000 0000 b 163 call V9.SetRegister165 ld a, 21 166 ld b, 0000 0000 b 167 call V9.SetRegister169 ld a, 22 170 ld b, 0000 0000 b 171 call V9.SetRegister173 ld a, 23 174 ld b, 0000 0000 b 175 call V9.SetRegister177 ld a, 24 178 ld b, 0000 0000 b 179 call V9.SetRegister183 184 ld hl, Tile_0 185 ld a, V9.P1_PATTBL_LAYER_A >> 16 186 ld de, V9.P1_PATTBL_LAYER_A AND 0xffff 187 ld bc, Tile_0.size 188 call V9.LDIRVM 191 192 ld hl, NamesTable_test 193 ld a, V9.P1_NAMTBL_LAYER_A >> 16 194 ld de, V9.P1_NAMTBL_LAYER_A AND 0xffff 195 ld bc, NamesTable_test.size 196 call V9.LDIRVM 199 200 201 205 209 ld a, 13 210 ld b, 0000 00 00 b 211 call V9.SetRegister214 216 217 ld a, 0000 1110 b218 out (V9.PORT_4), a220 221 ld a, 0000 0000 b222 out (V9.PORT_3), a224 227 ld hl, Palette_test228 ld c, V9.PORT_1229 ld b, 16 * 3 230.SetPalette_loop:231 outi 232 outi 233 outi 234 djnz .SetPalette_loop236 jp $ 239241245249252254264266268269Tile_0:270 db 0xff, 0xff, 0xff, 0xff271 db 0xf0, 0x00, 0x00, 0x0f272 db 0xf0, 0x00, 0x00, 0x0f273 db 0xf0, 0x00, 0x00, 0x0f274 db 0xf0, 0x00, 0x00, 0x0f275 db 0xf0, 0x00, 0x00, 0x0f276 db 0xf0, 0x00, 0x00, 0x0f277 db 0xff, 0xff, 0xff, 0xff278.size: equ $ - Tile_0280NamesTable_test:281 dw 0x0000, 0x0000, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1282 305.size: equ $ - NamesTable_test307Palette_test:308 309 db 15, 0, 0310 db 15, 31, 31311 db 15, 0, 31312 db 15, 15, 15314 db 0, 0, 0315 db 31, 0, 0316 db 0, 31, 0317 db 0, 0, 31319 db 31, 15, 15320 db 15, 31, 15321 db 15, 15, 31322 db 15, 0, 0324 db 0, 15, 0325 db 0, 0, 15326 db 0, 7, 0327 db 0, 0, 7331332 ds PageSize - ($ - 0x4000), 255 333